# RSecretary - æ™ºèƒ½AIåŠ©ç†ç³»ç»Ÿ

ğŸ¤– ä¸€ä¸ªæ”¯æŒå¤šå¹³å°æœºå™¨äººçš„æ™ºèƒ½ç”Ÿæ´»åŠ©ç†ï¼ŒåŸºäº Gemini AI å’Œ Notion æ•°æ®åº“ï¼Œå¸®æ‚¨æ™ºèƒ½ç®¡ç†è®°è´¦ã€è®¢é˜…å’Œå¾…åŠäº‹é¡¹ã€‚

## æ ¸å¿ƒåŠŸèƒ½

### ğŸ“… æ¯æ—¥è‡ªåŠ¨æ¨é€
- **æ¨é€æ—¶é—´**: æ¯å¤©æ—©ä¸Š 8:00
- **æ¨é€å†…å®¹**: 
  - ğŸŒ… AIç”Ÿæˆä¸ªæ€§åŒ–æ—©å®‰é—®å€™
  - ğŸ’° æ˜¨æ—¥æ”¶æ”¯ç»Ÿè®¡ï¼ˆæ”¶å…¥/æ”¯å‡º/å‡€æ”¶å…¥ï¼‰  
  - ğŸ“ ä»Šæ—¥å¾…åŠå’Œé€¾æœŸä»»åŠ¡æé†’

### ğŸ¤– æ™ºèƒ½å¯¹è¯
- åŸºäº Google Gemini AI çš„è‡ªç„¶è¯­è¨€ç†è§£
- æ”¯æŒä¸Šä¸‹æ–‡å¯¹è¯ï¼Œç†è§£æ‚¨çš„çœŸå®æ„å›¾
- æ— éœ€å¤æ‚å‘½ä»¤ï¼Œç”¨è‡ªç„¶è¯­è¨€å³å¯å®Œæˆæ‰€æœ‰æ“ä½œ

### ğŸ“ è®°è´¦ç®¡ç†
- æ™ºèƒ½è¯†åˆ«æ”¶å…¥å’Œæ”¯å‡ºä¿¡æ¯
- è‡ªåŠ¨åˆ†ç±»å’Œæ ‡ç­¾ç®¡ç†
- æ”¯æŒå¤šç§è´§å¸å’Œè´¦æˆ·
- æä¾›è¯¦ç»†çš„è´¢åŠ¡ç»Ÿè®¡å’Œåˆ†æ

### ğŸ’° è®¢é˜…ç®¡ç†
- è®°å½•å’Œç®¡ç†å„ç§è®¢é˜…æœåŠ¡
- æ™ºèƒ½æé†’ç»­è´¹æ—¥æœŸ
- è®¡ç®—æœˆåº¦å’Œå¹´åº¦è®¢é˜…æˆæœ¬
- æ”¯æŒè®¢é˜…çŠ¶æ€ç®¡ç†

### âœ… å¾…åŠäº‹é¡¹
- æ™ºèƒ½åˆ›å»ºå’Œç®¡ç†ä»»åŠ¡
- æ”¯æŒä¼˜å…ˆçº§å’Œæˆªæ­¢æ—¥æœŸ
- è‡ªåŠ¨æé†’å’Œä»»åŠ¡è·Ÿè¸ª
- çµæ´»çš„ä»»åŠ¡åˆ†ç±»ç³»ç»Ÿ

### ğŸ¤– å¤šå¹³å°æ”¯æŒ
- **Telegram** - æ”¯æŒ
- **Synology Chat** - è®¡åˆ’æ”¯æŒ

### ğŸ“Š æ•°æ®å­˜å‚¨
- ä½¿ç”¨ Notion ä½œä¸ºæ•°æ®åº“
- æ•°æ®å®‰å…¨å¯é ï¼Œæ”¯æŒå¤‡ä»½
- å¯è§†åŒ–æ•°æ®å±•ç¤º
- æ”¯æŒæ•°æ®å¯¼å‡ºå’Œåˆ†æ

## ğŸš€ å¿«é€Ÿå¼€å§‹

### ç¯å¢ƒè¦æ±‚

- Python 3.8+
- Gemini API å¯†é’¥
- Notion é›†æˆä»¤ç‰Œ
- è‡³å°‘ä¸€ä¸ªæœºå™¨äººå¹³å°çš„è®¿é—®æƒé™

### å®‰è£…æ­¥éª¤

1. **å…‹éš†é¡¹ç›®**
```bash
git clone https://github.com/your-username/RSecretary.git
cd RSecretary
```

2. **åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ**
```bash
python -m venv .venv
source .venv/bin/activate  # Linux/Mac
# æˆ–
.venv\Scripts\activate  # Windows
```

3. **å®‰è£…ä¾èµ–**
```bash
pip install -r requirements.txt
```

4. **é…ç½®ç³»ç»Ÿ**
```bash
# å¤åˆ¶é…ç½®æ¨¡æ¿
cp config/config.yaml.example config/config.yaml

# ç¼–è¾‘é…ç½®æ–‡ä»¶
vim config/config.yaml
```

### ğŸ“‹ é…ç½®æŒ‡å—

#### 1. Gemini AI é…ç½®

1. è®¿é—® [Google AI Studio](https://makersuite.google.com/)
2. åˆ›å»º API å¯†é’¥
3. åœ¨é…ç½®æ–‡ä»¶ä¸­å¡«å…¥ï¼š

```yaml
gemini:
  api_key: "your_gemini_api_key_here"
  model: "gemini-pro"
  temperature: 0.7
  max_tokens: 1000
```

#### 2. Notion é…ç½®

1. è®¿é—® [Notion Integrations](https://www.notion.so/my-integrations)
2. åˆ›å»ºæ–°çš„é›†æˆå¹¶è·å–ä»¤ç‰Œ
3. åˆ›å»ºä»¥ä¸‹æ•°æ®åº“å¹¶è·å–ID, [æ•°æ®åº“æ¨¡æ¿](https://www.notion.so/randallanjie/RSecretaryShare-231a3930a20380fb9816e2b155173297?source=copy_link)
   - è®°è´¦æ•°æ®åº“
   - è®¢é˜…æ•°æ®åº“  
   - å¾…åŠäº‹é¡¹æ•°æ®åº“
4. é…ç½®æ•°æ®åº“æƒé™ï¼Œç¡®ä¿é›†æˆå¯ä»¥è¯»å†™

> å¦‚ä½•è·å–æ•°æ®åº“ID:
> åœ¨ Notion ä¸­æ‰“å¼€æ•°æ®åº“ï¼Œå¤åˆ¶ URL ä¸­çš„æœ€åä¸€éƒ¨åˆ†ï¼ˆä¾‹å¦‚ `https://www.notion.so/yourworkspace/DatabaseName-1234567890abcdef1234567890abcdef?v=123456789`ï¼ŒID ä¸º `1234567890abcdef1234567890abcdef`ï¼‰

```yaml
notion:
  token: "your_notion_integration_token_here"
  databases:
    accounting: "your_accounting_database_id"
    subscriptions: "your_subscriptions_database_id"
    todos: "your_todos_database_id"
```

#### 3. Telegram æœºå™¨äººé…ç½®

1. ä¸ [@BotFather](https://t.me/BotFather) å¯¹è¯åˆ›å»ºæœºå™¨äºº
2. è·å–æœºå™¨äººä»¤ç‰Œ
3. åœ¨é…ç½®æ–‡ä»¶ä¸­å¯ç”¨ï¼š

```yaml
bots:
  telegram:
    enabled: true
    token: "your_telegram_bot_token"
```

### ğŸ”§ è¿è¡Œç³»ç»Ÿ

#### æ£€æŸ¥é…ç½®
```bash
python main.py check
```

#### æµ‹è¯•è¿æ¥
```bash
python main.py test
```

#### å¯åŠ¨æœåŠ¡
```bash
python main.py start
```

## ğŸ“± ä½¿ç”¨æŒ‡å—

### åŸºç¡€å¯¹è¯

ä¸æœºå™¨äººçš„å¯¹è¯å®Œå…¨æ˜¯è‡ªç„¶è¯­è¨€ï¼Œä¾‹å¦‚ï¼š

#### è®°è´¦åŠŸèƒ½
```
ç”¨æˆ·: ä»Šå¤©åˆé¤èŠ±äº†30å…ƒ
æœºå™¨äºº: å¥½çš„ï¼Œæˆ‘å·²ç»è®°å½•äº†æ‚¨çš„æ”¯å‡ºï¼šåˆé¤ 30å…ƒ

ç”¨æˆ·: æœ¬æœˆèŠ±äº†å¤šå°‘é’±ï¼Ÿ
æœºå™¨äºº: æ‚¨æœ¬æœˆæ€»æ”¯å‡ºï¼š1,250å…ƒï¼Œæ”¶å…¥ï¼š5,000å…ƒï¼Œå‡€é¢ï¼š3,750å…ƒ
```

#### è®¢é˜…ç®¡ç†
```
ç”¨æˆ·: æˆ‘è®¢é˜…äº†Netflixï¼Œæ¯æœˆ50å…ƒ
æœºå™¨äºº: å·²è®°å½•Netflixè®¢é˜…ï¼Œæœˆè´¹50å…ƒï¼Œä¸‹æ¬¡æ‰£è´¹æ—¶é—´ï¼š2024å¹´1æœˆ15æ—¥

ç”¨æˆ·: æˆ‘çš„è®¢é˜…æœ‰å“ªäº›ï¼Ÿ
æœºå™¨äºº: æ‚¨å½“å‰çš„æ´»è·ƒè®¢é˜…ï¼š
1. Netflix - 50å…ƒ/æœˆ
2. Spotify - 15å…ƒ/æœˆ
æ€»æœˆåº¦æˆæœ¬ï¼š65å…ƒ
```

#### å¾…åŠäº‹é¡¹
```
ç”¨æˆ·: æé†’æˆ‘æ˜å¤©ä¸‹åˆ3ç‚¹å¼€ä¼š
æœºå™¨äºº: å·²åˆ›å»ºå¾…åŠäº‹é¡¹ï¼šæ˜å¤©ä¸‹åˆ3ç‚¹å¼€ä¼šï¼Œæˆªæ­¢æ—¶é—´ï¼š2024å¹´1æœˆ15æ—¥ 15:00

ç”¨æˆ·: ä»Šå¤©æœ‰ä»€ä¹ˆä»»åŠ¡ï¼Ÿ
æœºå™¨äºº: æ‚¨ä»Šå¤©çš„å¾…åŠäº‹é¡¹ï¼š
1. ä¸‹åˆ3ç‚¹å¼€ä¼š (é«˜ä¼˜å…ˆçº§)
2. å®Œæˆé¡¹ç›®æŠ¥å‘Š (ä¸­ä¼˜å…ˆçº§)
```


## ä½¿ç”¨æ–¹æ³•

### ğŸ’¬ ä¸æœºå™¨äººå¯¹è¯
å‘é€æ¶ˆæ¯ç»™æœºå™¨äººï¼Œæ”¯æŒè‡ªç„¶è¯­è¨€äº¤äº’ï¼š
- "å¸®æˆ‘è®°å½•ä¸€ä¸‹ä»Šå¤©èŠ±äº†50å…ƒä¹°å’–å•¡"
- "æˆ‘ä»Šå¤©æœ‰å“ªäº›ä»»åŠ¡"
- "å‘å¸ƒä»£ç è¿™ä¸ªä»»åŠ¡å·²ç»å®Œæˆäº†"

### ğŸ“… æ¯æ—¥æ¨é€ç®¡ç†
ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤ç®¡ç†æ¯æ—¥æ¨é€ï¼š

```
/daily_report       # ç«‹å³æŸ¥çœ‹ä»Šæ—¥æŠ¥å‘Š
```

**æ¯æ—¥æ¨é€ç¤ºä¾‹**:
```
ã€æ—©å®‰ã€‘æ—©ä¸Šå¥½ï¼å¸Œæœ›ä»Šå¤©çš„æ¯ä¸€åˆ»éƒ½å……æ»¡é˜³å…‰å’Œå¥½å¿ƒæƒ…ï½
ä»Šå¤©æ˜¯ 2025-07-15 å‘¨äºŒ

ã€æ˜¨æ—¥æ”¶æ”¯ã€‘
æ”¶å…¥ï¼š1200.00å…ƒ | æ”¯å‡ºï¼š350.00å…ƒ | å‡€æ”¶å…¥ï¼š850.00å…ƒ | å…± 5 ç¬”è®°å½•

ã€ä»Šæ—¥å¾…åŠã€‘
ã€é€¾æœŸä»»åŠ¡ã€‘
- é¡¹ç›®æŠ¥å‘Š ã€é«˜ã€‘ (é€¾æœŸ: 2025-07-14)

ã€ä»Šæ—¥ä»»åŠ¡ã€‘  
- å¼€ä¼š ã€é«˜ã€‘ ã€å¾…å®Œæˆã€‘
- å‘å¸ƒä»£ç  ã€ä¸­ã€‘ ã€è¿›è¡Œä¸­ã€‘
- ä¹°å¥¶èŒ¶ ã€ä½ã€‘ ã€å¾…å®Œæˆã€‘

ç¥æ‚¨ä»Šå¤©å·¥ä½œé¡ºåˆ©ï¼Œå¿ƒæƒ…æ„‰å¿«ï¼
```

### ğŸ”§ ä»»åŠ¡ç®¡ç†

## ğŸ—ï¸ é¡¹ç›®æ¶æ„

```
RSecretary/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ ai/                 # AIæ¨¡å— (Geminié›†æˆ)
â”‚   â”œâ”€â”€ storage/            # å­˜å‚¨æ¨¡å— (Notioné›†æˆ)
â”‚   â”œâ”€â”€ tasks/              # ä»»åŠ¡ç®¡ç† (è®°è´¦ã€è®¢é˜…ã€å¾…åŠ)
â”‚   â”œâ”€â”€ core/               # æ ¸å¿ƒæ¨¡å— (æ¶ˆæ¯å¤„ç†ã€ä»»åŠ¡åˆ†å‘)
â”‚   â”œâ”€â”€ bots/               # æœºå™¨äººæ¨¡å— (å¤šå¹³å°æ”¯æŒ)
â”‚   â””â”€â”€ config/             # é…ç½®ç®¡ç†
â”œâ”€â”€ config/                 # é…ç½®æ–‡ä»¶
â”œâ”€â”€ logs/                   # æ—¥å¿—æ–‡ä»¶
â”œâ”€â”€ tests/                  # æµ‹è¯•æ–‡ä»¶
â”œâ”€â”€ requirements.txt        # ä¾èµ–åˆ—è¡¨
â”œâ”€â”€ main.py                 # ä¸»ç¨‹åºå…¥å£
â””â”€â”€ README.md              # é¡¹ç›®æ–‡æ¡£
```

### æ ¸å¿ƒç»„ä»¶

- **MessageProcessor**: æ™ºèƒ½æ¶ˆæ¯å¤„ç†å™¨ï¼Œè´Ÿè´£ç†è§£ç”¨æˆ·æ„å›¾
- **TaskDispatcher**: ä»»åŠ¡åˆ†å‘å™¨ï¼Œç®¡ç†å„ç§ä»»åŠ¡çš„æ‰§è¡Œ
- **GeminiClient**: Gemini AIå®¢æˆ·ç«¯ï¼Œæä¾›è‡ªç„¶è¯­è¨€ç†è§£
- **NotionClient**: Notion APIå®¢æˆ·ç«¯ï¼Œå¤„ç†æ•°æ®å­˜å‚¨
- **BaseBot**: æœºå™¨äººåŸºç±»ï¼Œå®šä¹‰ç»Ÿä¸€çš„æœºå™¨äººæ¥å£

## ğŸ› ï¸ å¼€å‘æŒ‡å—

### æ·»åŠ æ–°çš„æœºå™¨äººå¹³å°

1. ç»§æ‰¿ `BaseBot` ç±»
2. å®ç°å¿…è¦çš„æŠ½è±¡æ–¹æ³•
3. åœ¨ä¸»åº”ç”¨ä¸­æ³¨å†Œæœºå™¨äºº
4. æ›´æ–°é…ç½®æ–‡ä»¶æ¨¡æ¿

ç¤ºä¾‹ï¼š
```python
from src.bots.base_bot import BaseBot

class NewPlatformBot(BaseBot):
    def __init__(self):
        super().__init__("BotName", "PlatformName")
    
    async def initialize(self) -> bool:
        # åˆå§‹åŒ–è¿æ¥
        pass
    
    async def start(self) -> None:
        # å¯åŠ¨æœºå™¨äºº
        pass
    
    # ... å®ç°å…¶ä»–å¿…è¦æ–¹æ³•
```

### æ·»åŠ æ–°çš„ä»»åŠ¡ç±»å‹

1. ç»§æ‰¿ `BaseTask` ç±»
2. å®ç°ä»»åŠ¡é€»è¾‘
3. åœ¨ `TaskFactory` ä¸­æ³¨å†Œ
4. æ›´æ–°AIæç¤ºè¯ä»¥è¯†åˆ«æ–°ä»»åŠ¡

### è‡ªå®šä¹‰é…ç½®

ç³»ç»Ÿæ”¯æŒçµæ´»çš„é…ç½®ç®¡ç†ï¼š

```python
from src.config.settings import settings

# è®¿é—®é…ç½®
api_key = settings.gemini.api_key
database_id = settings.notion.databases['accounting']

# éªŒè¯é…ç½®
if settings.validate_config():
    print("é…ç½®æœ‰æ•ˆ")
```

## ğŸ” æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

#### 1. Gemini API é”™è¯¯
```
é”™è¯¯: Gemini APIå¯†é’¥æœªé…ç½®
è§£å†³: æ£€æŸ¥é…ç½®æ–‡ä»¶ä¸­çš„ gemini.api_key è®¾ç½®
```

#### 2. Notion è¿æ¥å¤±è´¥
```
é”™è¯¯: Notionä»¤ç‰Œæœªé…ç½®
è§£å†³: 
1. ç¡®è®¤é›†æˆä»¤ç‰Œæ­£ç¡®
2. æ£€æŸ¥æ•°æ®åº“IDæ˜¯å¦æ­£ç¡®
3. éªŒè¯é›†æˆæ˜¯å¦æœ‰æ•°æ®åº“è®¿é—®æƒé™
```

#### 3. æœºå™¨äººæ— å“åº”
```
è§£å†³:
1. æ£€æŸ¥æœºå™¨äººä»¤ç‰Œæ˜¯å¦æ­£ç¡®
2. ç¡®è®¤ç½‘ç»œè¿æ¥æ­£å¸¸
3. æŸ¥çœ‹æ—¥å¿—æ–‡ä»¶è·å–è¯¦ç»†é”™è¯¯ä¿¡æ¯
```

### æ—¥å¿—åˆ†æ

ç³»ç»Ÿæ—¥å¿—ä¿å­˜åœ¨ `logs/rsecretary.log`ï¼š

```bash
# æŸ¥çœ‹æœ€æ–°æ—¥å¿—
tail -f logs/rsecretary.log

# æœç´¢é”™è¯¯
grep "ERROR" logs/rsecretary.log
```

## ğŸ¤ è´¡çŒ®æŒ‡å—

æˆ‘ä»¬æ¬¢è¿ä»»ä½•å½¢å¼çš„è´¡çŒ®ï¼

### è´¡çŒ®æ–¹å¼

1. Fork é¡¹ç›®
2. åˆ›å»ºåŠŸèƒ½åˆ†æ”¯ (`git checkout -b feature/AmazingFeature`)
3. æäº¤æ›´æ”¹ (`git commit -m 'Add some AmazingFeature'`)
4. æ¨é€åˆ†æ”¯ (`git push origin feature/AmazingFeature`)
5. åˆ›å»º Pull Request

### å¼€å‘è§„èŒƒ

- éµå¾ª PEP 8 ä»£ç é£æ ¼
- æ·»åŠ å¿…è¦çš„æ–‡æ¡£å­—ç¬¦ä¸²
- ç¼–å†™å•å…ƒæµ‹è¯•
- æäº¤å‰è¿è¡Œä»£ç æ£€æŸ¥

```bash
# ä»£ç æ ¼å¼åŒ–
black src/

# ä»£ç æ£€æŸ¥
flake8 src/
```

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ MIT è®¸å¯è¯ - æŸ¥çœ‹ [LICENSE](LICENSE) æ–‡ä»¶äº†è§£è¯¦æƒ…ã€‚
